<!DOCTYPE html>
<html lang="en">
  <head>
    <base target="_top">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Food Insecurity Factors</title>
    <link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico">
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css" integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="">
      <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js" integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>
      <!-- Load jQuery and PapaParse to read data from a CSV file -->
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
      <!-- <script src="./ChoroplethData/js/childHunger.js"></script> -->

      <!-- leaflet style -->
    <style>
      html, body {
        height: 100%;
        margin: 5;
      }
      .leaflet-container {
        height: 400px;
        width: 600px;
        max-width: 100%;
        max-height: 100%;
      }
    </style>
    <!-- <script src="./LayerData/SNAP-NC.js"></script> -->
  </head>
<body>
    <!-- <script>
      var selectedYear = '2010'
        function myStyle(feature) {
            return {
            "fillColor": getColor(feature.properties[selectedYear]),
            "color": "black",// notice that the selected year will call the property of the geojson
            "weight": 0.75,
            "opacity": 2.0,
            "fillOpacity": 0.7
            }
        };

        function getColor(colorScale) {
            return colorScale < 0.15 ? "#238b45" 
            :colorScale < 0.2 ? "#ffffb2" 
            :colorScale < 0.25 ? "#fd8d3c"
            : '#e31a1c';
        };

        var childHungerRate = L.geoJSON(childHunger, {style: myStyle}).addTo(map);

        function moveSlider(value) {
            selectedYear = value; // this changes the value of the selectedYear variable
            childHungerRate.remove() // this removes the geojson 
            childHungerRate = L.geoJSON(childHunger, {style: myStyle}).addTo(map); // this creates a new geojson, this time it will be based on the new selected Year 
            document.getElementById('theYear').innerHTML = 'Year: '+ value  
        }
        moveSlider('2010')
    </script> -->

  <script>
    // Food Bank markers manually created
    const foodBanks = L.layerGroup();
  
    const mannaFB = L.marker([35.57501, -82.501873], {icon: iffsIcon}).bindPopup('MANNA Food Bank').addTo(foodBanks);
    const secHarvMet = L.marker([35.239401, -80.837983]).bindPopup('Second Harvest Food Bank of Metrolina').addTo(foodBanks);
    const FBAbermarle = L.marker([36.285388, -76.213284]).bindPopup('Food Bank of the Abermarle').addTo(foodBanks);
    const secHarvSE = L.marker([35.034307, -78.908828]).bindPopup('Second Harvest of Southeast NC').addTo(foodBanks);
    const FBCE = L.marker([35.831161, -78.607644]).bindPopup('Food Bank of Central and Eastern NC').addTo(foodBanks);
    const IFFS = L.marker([35.689086, -78.675118]).bindPopup('Inter-Faith Food Shuttle').addTo(foodBanks);
    const secHarvNW = L.marker([36.053473, -80.207308]).bindPopup('Second Harvest of Northwest NC').addTo(foodBanks);

    const mbAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>';
    const mbUrl = 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw';
   
    const streets = L.tileLayer(mbUrl, {id: 'mapbox/streets-v11', tileSize: 512, zoomOffset: -1, attribution: mbAttr});
  
    const osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    });
  
    const map = L.map('map', {
      center: [35.994919, -79.299003],
      zoom: 7,
      layers: [streets, foodBanks]
    });
  
    const baseLayers = {
      'OpenStreetMap': osm,
      'Streets': streets,
    };
  
    const overlays = {
      'Food Banks': foodBanks,
    };
  
    const layerControl = L.control.layers(baseLayers, overlays).addTo(map);  
  </script>
</body>
</html>